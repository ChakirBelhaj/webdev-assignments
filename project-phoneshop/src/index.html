<!DOCTYPE html>
<html>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <head>
        <title>Illegal phoneshop America</title>
        <link rel="stylesheet" type="text/css" href="./css/styles.css" />
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    </head>

    <body style="background-image: url('https://wallpaperaccess.com/full/1611219.jpg');">
        <nav>
            <ul class="navBar">
                <li><a href="index.html">Home</a></li>
                <li><a href="contact.html">Contact</a></li>
                <li><a href="about.html">About</a></li>
            </ul>
        </nav>

        <section>
            <h1><abbr title="World Health Organization">Illegal</abbr> phoneshop America</h1>
            <h2>Keep it quiet</h2>
            <p>
                The World Wide Fund for Nature (WWF) is an international organization working on issues regarding the conservation, research and restoration of
                the environment, formerly named the World Wildlife Fund. WWF was founded in 1961.
            </p>
        </section>

        <form>
            <table class="center overflowAuto" id="phonesTable">
                <caption>
                    Stolen phones
                </caption>
            </table>
            <button type="submit">Add</button>
        </form>
    </body>
    <footer class="footer">
        <p>Created by: Chakir Belhaj & Ahmed Mous</p>
        <p>Contact information: <a href="mailto:chakir.belhaj@outlook.com"> chakir.belhaj@outlook.com</a>.</p>
    </footer>
</html>

<script>
    $(document).ready(function() {
        getPhoneData();
    });

    function getPhoneData() {
        $.ajax({
            url: "https://wt.ops.labs.vu.nl/api20/2b9115a4",
            context: document.body,
            method : "GET",
            success: function(result) {
                populateTable(result);
            }
        });
    }

    function populateTable(phonesData) {
        console.log(phonesData);
        var table = $("#phonesTable");
        $.each(phonesData, function(idx, phone) {
            table.append(
                "<tr>" +
                    "<td><img class='imageInTable' src="+ phone.image +"></td>"+
                    "<td>" + phone.brand + "</td>"+
                    "<td>" + phone.model + "</td>"+
                    "<td>" + phone.os + "</td>"+
                    "<td>" + phone.screensize + "</td>"+
                "</tr>");
        });
        addFormRowToTable(table);
    }

    function addFormRowToTable(table){
        table.append(
                "<tr>"+
                    "<td><input required type='text' name='brand' /></td>"+
                    "<td><input required type='text' name='model' /></td>"+
                    "<td><input required type='text' name='os' /></td>"+
                    "<td><input required type='text' name='image' /></td>"+
                    "<td><input required type='number' name='screensize' /></td>"+
                "</tr>"
            )
    }
</script>
